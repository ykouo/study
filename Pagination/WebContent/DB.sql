SELECT * FROM ALL_TABLES;

CREATE TABLE USERINFO(
	USERID VARCHAR(20) PRIMARY KEY, 
	USERNAME VARCHAR(25),
	USERPW VARCHAR(20),
	UDATE DATE
);

INSERT INTO USERINFO VALUES ('timo','티모','1234',SYSDATE);
INSERT INTO USERINFO VALUES ('an','ykouo','11',SYSDATE);
SELECT * FROM USERINFO;
-- ================================================================================================

CREATE TABLE MESSAGE(
	MID INT PRIMARY KEY, 
	USERID VARCHAR(20),
	MSG VARCHAR(100),
	FAVCOUNT INT DEFAULT 0,
	REPLYCOUNT INT DEFAULT 0,
	MDATE DATE
);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','1번글',1,2,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','2번글',2,3,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','3번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','4번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','5번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','6번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','7번글',1,2,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','8번글',2,3,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','9번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','10번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','11번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','12번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','13번글',1,2,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','14번글',2,3,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','15번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','16번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','17번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','18번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','19번글',1,2,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','20번글',2,3,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','21번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','22번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','23번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','24번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','25번글',1,2,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','26번글',2,3,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','27번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','28번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','29번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','30번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','31번글',1,2,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','32번글',2,3,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','33번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','34번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','35번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','36번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','37번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','38번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','39번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','40번글',1,2,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','41번글',2,3,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','42번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','43번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','44번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','45번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','46번글',2,3,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','47번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','48번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','49번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','50번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','51번글',1,2,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','52번글',2,3,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','53번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','54번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','55번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','56번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','57번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','58번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','59번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','60번글',1,2,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','61번글',2,3,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','62번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','63번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','64번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','65번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','66번글',2,3,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','67번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','68번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','69번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','70번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','71번글',1,2,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','72번글',2,3,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','73번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','74번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','75번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','76번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','77번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','78번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','79번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','80번글',1,2,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','81번글',2,3,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','82번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','83번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','84번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','85번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','86번글',2,3,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','87번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','88번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','89번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','90번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','91번글',1,2,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','92번글',2,3,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','93번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','94번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','95번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','96번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','97번글',2,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','98번글',3,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'an','99번글',1,0,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','100번글',1,2,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','101번글',2,3,SYSDATE);
INSERT INTO MESSAGE VALUES ((SELECT NVL(MAX(MID),0)+1 FROM MESSAGE),'timo','102번글',2,0,SYSDATE);



SELECT COUNT(*) FROM MESSAGE;
SELECT * FROM (SELECT ROWNUM AS MID,USERID,MSG,FAVCOUNT,REPLYCOUNT,MDATE FROM MESSAGE ORDER BY MID) WHERE MID BETWEEN 1 AND 10;
select * from (select rownum as mid, userid,msg,favcount,replycount, mdate from message order by mid) where mid 
between 1  and 10;



SELECT * FROM MESSAGE WHERE USERID ='an';
SELECT * FROM MESSAGE WHERE ROWNUM <= 5 ORDER BY MID DESC ;
SELECT * FROM (SELECT ROWNUM AS ROW_NUM, MESSAGE.* FROM MESSAGE) WHERE ROW_NUM<=5;
-- ================================================================================================

CREATE TABLE REPLY(
	RID INT PRIMARY KEY, 
	MID INT, 
	USERID VARCHAR(20),
	RDATE DATE,
	RMSG VARCHAR(50),
	CONSTRAINT MSGRP FOREIGN KEY (MID) REFERENCES MESSAGE (MID) ON DELETE CASCADE
);

INSERT INTO REPLY VALUES((SELECT NVL(MAX(RID),0)+1 FROM REPLY),1,'timo',SYSDATE,'대댓글1');
INSERT INTO REPLY VALUES((SELECT NVL(MAX(RID),0)+1 FROM REPLY),1,'timo',SYSDATE,'대댓글2');
INSERT INTO REPLY VALUES((SELECT NVL(MAX(RID),0)+1 FROM REPLY),2,'timo',SYSDATE,'대댓글3');
INSERT INTO REPLY VALUES((SELECT NVL(MAX(RID),0)+1 FROM REPLY),2,'timo',SYSDATE,'대댓글4');
INSERT INTO REPLY VALUES((SELECT NVL(MAX(RID),0)+1 FROM REPLY),2,'timo',SYSDATE,'대댓글5');
INSERT INTO REPLY VALUES((SELECT NVL(MAX(RID),0)+1 FROM REPLY),?,?,SYSDATE,?)
-- ================================================================================================

SELECT * FROM MESSAGE WHERE ROWNUM <= 6 ORDER BY MID DESC;


















UPDATE MESSAGE SET REPLYCOUNT=REPLYCOUNT-1 WHERE MID=1;
SELECT * FROM REPLY;
SELECT * FROM MESSAGE;
SELECT COUNT(*) AS CNT FROM MESSAGE;
SELECT * FROM USERINFO;
select * from reply;
DROP TABLE USERINFO;
DROP TABLE REPLY;
DROP TABLE MESSAGE;
DELETE FROM MESSAGE WHERE MID>=1 AND MID<=50;
DELETE FROM REPLY WHERE RID>=1 AND RID<=3;
DELETE FROM USERINFO WHERE USERID='List';
SELECT * FROM MESSAGE ((SELECT * FROM MESSAGE WHERE USERID =?))